# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Обзор базового кода 

#### Класс Api

базовый класс, общая реализация, на его основе будет создан собственный, под конкретную реализацию текущего проекта.

readonly base с типом строка, содержит в себе базовую ссылку для коммуникации с сервером
protected options с типом RequestInit, конфигурация запроса на сервером

конструктор принимает baseUrl и options (может быть пустым объектом)

методы:
get(uri тип строка) не имеет возвратного значения, добавляет uri к baseUrl, для обращения за объектами на сервер
post(uri тип строка, data тип объект, method тип ApiPostMethods (значение по умолчанию POST))
handleResponse(response типа Response) возвращает объект Promise, служит для обработки ответов сервера в случае успеха парсим данные, в случае провала парсим JSON ошибки

#### Класс Component 

абстрактный родительский класс для всех объектов слоя отображения

конструктор принимает container тип HTMLElement, сюда передаем контейнер в котором будем искать другие элементы для выгрузки данных из модели

методы для работы с разметкой:

toggleClass , без возвратного значения, принимает в параметрах элемент разметки, название класса которое нужно переключать, и один необзятальный паратметр force тип булевый для ручного переключения (установки) класса. true - установит, false - удалит. Если не передан класс будет переключаться. 

setText принимет в параметры элемент разметки и значение. Внутри в элемент разметки устанавливается текстовое содержимое из параметра значения. К примеру приходят данные из модели. Берем элемент разметки и в текстовое поле устанавливаем данные из модели. Без возвратного значения

setDisabled, метод для управления состоянием disabled у HTML элементов. Без возвратного значения. Принимает в параметрах вызова элемент разметки, состоянием которого нужно управлять. и булевый параметр state, если передано значение true - элемент получит парамтер disabled и false в этом случае получит состояние активный. 

setHidden метод без возвратного значения, в параметрах вызова получает элемент разметки, у которого управляем значением отображения. Скрываем из интерфейса

setVisible метод без возвратного значения, в параметрах получаем элемент разметки отображением которго управляем. Делаем элемент видимым

setImage метоб без возвратного значения, в параметры получает элемент разметки тип HTMLImageElement, параметр src это ссылка на изображение и необязательный параметр alt для установки альтернативного текста для изображения. 

render

## Типизация данных в приложении

В приложение с сервера поступают данные, объекты товаров, это будут объекты типа ICard.
#### interface ICard {
  id: string - каждый товар приходит с уникальным id, тип строка 
  category: string - товары имеют разные категории, тип строка
  title: string - у товаров разные названия, поле для названия, тип строка
  image: string - хранит ссылку на изображение товара, тип строка
  description: string - поле для полного описания товара, тип строка
  price: number | null - для хранения цены на товар, некоторые товары могут быть бесценными, тип число либо null
}

Товары можно положить в корзину, данные не приходят с сервера, но их надо хранить в приложении, типизация объекта для хранения товаров
#### interface IBasket {
  items: ICard[]; - в корзину можно передать товары, тип массив объектов-ICard
  total: number - поле для хранения общей стоимости товаров в корзине
}

Пользователь может выбрать способ оплаты товаров, это либо офлайн, либо онлайн оплата
#### enum Tpayment =
'cash' - тип для обозначения оплаты при получении
'card' - тип оплаты для онлайн

Как итог, приложение должно отправить на сервер объект, который будет содержать в себе информацию по заказу:
#### interface IOrder {
  payment: Tpayment - поле для обозначения выбранного типа оплаты, тип Tpayment
  address: string - адрес доставки заказа, тип строка
  email: string - клиентская почта, тип строка
  phone: string - пользовательский номер телефона, тип строка
  items: string[] - на сервер достаточно передеать только id товаров, тип массив строк
  total: number - подсчет общей суммы товаров, тип число
}

В приложении будет один объект, который будет содержать все данные, объект состояние приложения, одно из полей будет заказ, без поля общей суммы и объектов для заказа
#### type TOrder {
  payment: Tpayment;
  address: string;
  email: string;
  phone: string;
}

В приложении будет двухэтапная форма, первая часть типизирует только тип оплаты и адрес
#### type TOrderForm = Pick<IOrder, 'payment'|'address'>;

Вторая часть типизация почты и номера телефона 
#### type TContactsForm = Pick<IOrder, 'email'|'phone'>;

После отправки заказа на сервер приходит ответ в виде объекта
#### interface IOrderResult {
  id: string;    - каждый заказ получает id сохраняем id в данное поле
  total: number; - отображение суммы отправленого заказа
}

Общий объект для состояния приложения. Отвечает за хранение данные, в каталоге, в корзине, в заказе
#### interface AppData {
  praview: ICard    - тип ICard, содержит объект для отображения его данных в модальном окне
  catalog: ICard[]; – тип ICard[], после получения ответа с сервера, товары сохраняем в поле этого объекта
  basket: IBasket;  - типа IBasket, поле для хранения товаров, добавленных в коризну, подсчет суммы
  order: IOrder;    - тип IOrder, поле для хранения объекта заказа отправляемого на сервер
}

Утилитарный тип TypeScript для строго типизированного представления ошибок валидации формы или объекта.
#### type Errors<T extends object> = Partial<Record<keyof T, string>>;
Создает объект ошибок, где:

- Ключи соответствуют ключам переданного типа T. 
- Значения - строки с описанием ошибки или undefined. 
- Все свойства являются опциональными (объект может содержать ошибки только для некоторых полей)

Параметры типа T extends object - любой объектный тип, ключи которого будут использоваться для структуры ошибок

## Слой данных

#### Класс AppData
`AppData` - центральный класс-модель, управляющий состоянием приложения TypeScript. Наследуется от базового Model и обрабатывает каталог товаров, корзину, заказы и валидацию.

`Типы данных`

type `CatalogChangeEvent` = {
    items: ICard[];
}; - Событие обновления каталога товаров. 


type `OrderSubmitEvent` = {
    order: TOrder;
    total: number;
    items: string[];
}; - Событие подтверждения заказа, содержащее полную информацию для отправки на серве

`ValidationTests` - содержит в себе регулярные выражения, для тестирования полей почты и телефона

`Свойства класса` \
Приватные свойства 

`_preview`: ICard - товар для предпросмотра\
`_catalog`: ICard[] - массив товаров в каталоге\
`_basket`: IBasket - корзина с товарами и общей суммой\
`_order`: TOrder - данные заказа (оплата, адрес, email, телефон)

`Публичные свойства`\
Errors: Errors<TOrder> - объект ошибок валидации формы заказа

Сеттеры и геттеры:

`set preview(item: ICard)`  - Установка и эмит события, получает в параметрах объект типа ICard, ничего не возвращает\
`get preview(): ICard`      - Получение текущего preview

`set catalog(items: ICard[])`  - Установка и эмит события, в параметрах вызова объекты типа ICard (массив)\
`get catalog(): ICard[]`     - Получение каталога

#### _Основные методы_
`getBasketItems(): ICard[]` - Возвращает массив товаров в корзине.

`clearThePreview(): void` - Очищает товар предпросмотра (устанавливает в null). Ничего не возвращает

`checkItem(item: ICard): void` - Отвечает за проверку наличия товара в корзине, добавления его в корзину, проверка установленной цены, считает сумму и эмитирует событие обновления. Ничего не возвращает. 

`setOrderField<K extends keyof TOrder>(field: K, value: TOrder[K]): void`

Установка значений полей заказа:
- Типизированное обновление полей заказа
- Автоматическая валидация после изменения
- Определяет этап валидации на основе изменяемого поля

_Ничего не возвращает_

`validation(step: 'delivery' | 'contacts', changedField?: keyof TOrder): boolean`

Валидация данных заказа: 
 1. step - этап валидации (доставка или контакты) 
 2. changedField - опциональное поле, которое изменилось

Логика валидации:

- Доставка: проверяет обязательность адреса
- Контакты: проверяет email и телефон по регулярным выражениям
- Эмитит событие form:validated с ошибками и статусом

_возвращает логический тип_

`submitOrder(): void` - реализует отправку заказа на сервер, ничего не возвращает. Нет параметров вызова.

Отправка заказа:\
- Выполняет полную валидацию обоих этапов
- При успехе создает OrderSubmitEvent payload
- Эмитит событие order:confirmed с данными заказа

`clearBasket(): void` - Очищает корзину и обнуляет сумму. Не имеет параметров вызова, ничего не возвращает

`getBasketTotal(): number` - Рассчитывает общую сумму товаров в корзине. Возвращает числовое значение. Параметров вызова нет.

`clearForm(): void` - Сбрасывает данные заказа к значениям по умолчанию. Не имеет параметров вызова. Ничего не возвращает


## Слой отображения

#### class Page

`Page` - основной класс компонента страницы, управляющий UI элементами и взаимодействием с пользователем. Наследуется от абстрактного класса Component и реализует интерфейс IPage
```
interface IPage {
  basketCounter: number;
  catalog: HTMLElement[];
  locked: boolean;
}
```
Определяет структуру данных компонента страницы:

- basketCounter - количество товаров в корзине\
- catalog - массив HTML элементов товаров для отображения\
- locked - состояние блокировки интерфейса

##### Структура класса\
Защищенные свойства\
_basketCounter: HTMLElement - элемент счетчика корзины в хедере\
_basketButton: HTMLElement - кнопка открытия корзины\
_catalog: HTMLElement - контейнер каталога товаров\
_wrapper: HTMLElement - основной wrapper страницы для управления блокировкой

##### Конструктор

constructor(container: HTMLElement, protected events: IEvents)

- container - корневой элемент страницы\
- events - система событий для межкомпонентного взаимодействия

##### Инициализация элементов\
При создании экземпляра происходит поиск и привязка ключевых DOM элементов:\
this._basketCounter = ensureElement<HTMLElement>('.header__basket-counter');\
this._catalog = ensureElement<HTMLElement>('.gallery');\
this._wrapper = ensureElement<HTMLElement>('.page__wrapper');\
this._basketButton = ensureElement<HTMLElement>('.header__basket');

##### Обработчики событий\
Открытие корзины\

this._basketButton.addEventListener('click', () => {
    this.events.emit('basket:open');
})

_При клике на кнопку корзины эмитится событие basket:open для открытия модального окна корзины._

##### Сеттеры (управление состоянием)
`set basketCounter(value: number)`\
Обновление счетчика корзины:\
- Устанавливает текстовое значение в элемент _basketCounter\
- Использует метод setText из родительского класса Component\
- Автоматически преобразует число в строку

_имеет параметры вызова, value тип число_
_не имеет возвратного значения_

`set catalog(items: HTMLElement[])`\
Обновление каталога товаров:\
- Полностью заменяет содержимое контейнера _catalog\
- Использует replaceChildren() для эффективного обновления
- Принимает массив готовых HTML элементов карточек товаров

_имеет параметры вызова принимает массив элементов разметки_
_не имеет возвратного значения_

`set locked(value: boolean)`\
Блокировка/разблокировка интерфейса:\
Внутри используется родительский метод для переключение класса
`this.toggleClass(this._wrapper, 'page__wrapper_locked', value);`

_имеет параметры вызова, логический_
_без возвратного значения_

_Используется для блокировки интерфейса во время загрузки или оформления заказа_

#### class Modal
`Modal` - Компонент модального окна

##### Обзор
`Modal` - _универсальный компонент модального (всплывающего) окна, наследуемый от Component. Управляет отображением контента, открытием/закрытием и обработкой пользовательских взаимодействий._
```
interface IModalData {
    content: HTMLElement;
}
```
Определяет структуру данных для модального окна:\
`content` - HTML элемент, который будет отображаться внутри модального окна

##### Структура класса
Защищенные свойства\
`closeButton: HTMLButtonElement` - кнопка закрытия модального окна\
`_content: HTMLElement` - контейнер для основного контента модалки

##### Конструктор
constructor(container: HTMLElement, protected events: IEvents)

`container` - корневой элемент модального окна\
`events` - система событий для уведомления об изменениях состояния

##### Инициализация элементов
_При создании происходит поиск ключевых DOM элементов внутри контейнера:_\
this.closeButton = ensureElement<HTMLButtonElement>('.modal__close', container);\
this._content = ensureElement<HTMLElement>('.modal__content', container);

##### Обработчики событий
Закрытие модального окна

this.closeButton.addEventListener('click', this.close.bind(this));\
this.container.addEventListener('click', this.close.bind(this));\
this._content.addEventListener('click', (event) => event.stopPropagation());

Логика закрытия:
Клик по кнопке закрытия - явное закрытие пользователем\
Клик по overlay (фону) - закрытие по клику вне контента\
Блокировка всплытия - клик по контенту не закрывает модалку

##### Основные методы

`set content(value: HTMLElement)`\
_Установка контента модального окна:_\
- Полностью заменяет содержимое контейнера _content\
- Использует replaceChildren() для эффективного обновления\
- Может принимать null для очистки контента

_принимает в вызове элемент разметки_\
_не имеет возвратного значения_

`open(): void`\
Открытие модального окна:\
- Добавляет класс modal_active к контейнеру для отображения\
- Эмитит событие modal:open для уведомления других компонентов

_без возвратного значения_\
_нет параметров вызова_

`close(): void`\
Закрытие модального окна:\
- Удаляет класс modal_active для скрытия окна\
- Очищает контент (устанавливает content = null)\
- Эмитит событие modal:close для уведомления других компонентов

_без возвратного значения_\
_нет параметров вызова_

`render(data: IModalData): HTMLElement`\
Рендеринг модального окна:\
- Вызывает родительский метод render для обработки данных\
- Автоматически открывает модальное окно после рендеринга\
- Возвращает контейнер элемента

_имеет возвратное значение, элемент разметки_\
_Принимает данные типа IModalData, для рендера_

#### class Basket 
`Basket` - Компонент корзины товаров

##### Обзор
`Basket` - _компонент, отображающий содержимое корзины покупок. Наследуется от Component и реализует интерфейс IBasketView. Управляет списком товаров, общей суммой и кнопкой оформления заказа._
```
interface IBasketView {
    items: HTMLElement[];
    total: number;
    selected: string[];
}
```
Определяет структуру данных для отображения корзины:\
`items` - массив HTML элементов товаров\
`total` - общая стоимость товаров в корзине\
`selected` - массив идентификаторов выбранных товаров

##### Структура класса
Защищенные свойства\
_items: HTMLElement - контейнер для списка товаров\
_total: HTMLElement - элемент отображения общей суммы\
_button: HTMLElement - кнопка оформления заказа

##### Конструктор
```
constructor(container: HTMLElement, protected events: EventEmitter)
```
Параметры:\
`container: HTMLElement` - корневой элемент компонента корзины\
`events: EventEmitter` - система событий для межкомпонентного взаимодействия

Логика инициализации:
- Находит DOM элементы: .basket__list, .basket__price, .basket__button\
- Устанавливает обработчик клика на кнопку для открытия оформления заказа\
- Инициализирует пустой массив товаров

##### Обработчики событий
Оформление заказа
```
this._button.addEventListener('click', () => {
    events.emit('order:open');
})
```
При клике на кнопку эмитится событие `order:open` для перехода к оформлению заказа.

`set items(items: HTMLElement[])`\
Назначение: Устанавливает список товаров в корзине\
Параметры:\
- items: HTMLElement[] - массив HTML элементов товаров для отображения

__Возвращаемое значение:__ void

`set selected(items: string[])`\
Назначение: Управляет состоянием кнопки оформления заказа на основе выбранных товаров

Параметры:\
`items: string[]` - массив идентификаторов выбранных товаров

__Возвращаемое значение:__ void

`set total(total: number)`\
Назначение: Устанавливает общую стоимость товаров в корзине\
Параметры:\
total: number - общая сумма товаров

__Возвращаемое значение:__ void
#### class Card
`Card` - _Компонент карточки товара_

##### Обзор
`Card` - _универсальный компонент для отображения карточек товаров в каталоге, корзине и других разделах приложения. Наследуется от Component и работает с данными типа ICard._
```
interface ICardActions {
    onClick: (event: MouseEvent) => void;
}
```
Определяет обработчики событий для карточки:\
`onClick` - функция-обработчик клика по карточке или кнопке
##### Категории товаров
```
const categories: Record<string, string> = {
    'софт-скил': 'soft',
    'хард-скил': 'hard', 
    'другое': 'other',
    'дополнительное': 'additional',
    'кнопка': 'button',
};
```
##### Структура класса
Защищенные свойства\
`_image?: HTMLImageElement` - элемент изображения товара\
`_category?: HTMLElement` - элемент категории товара\
`_title: HTMLElement` - элемент заголовка товара\
`_description?: HTMLElement` - элемент описания товара\
`_button?: HTMLButtonElement` - кнопка действия (добавить/удалить)\
`_buttonText?: HTMLElement` - текст кнопки\
`_price: HTMLElement` - элемент цены товара\
`_index?: HTMLElement` - элемент индекса в корзине

##### Конструктор
```
constructor(container: HTMLElement, actions?: ICardActions)
```
__Параметры:__\
`container: HTMLElement` - корневой элемент карточки\
`actions?: ICardActions` - опциональные обработчики событий\
__Возвращаемое значение:__ экземпляр класса Card

##### Геттеры и сеттеры
`id` (getter/setter)
Назначение: Управление идентификатором карточки через data-атрибут\
__Setter__\
__Параметры:__ value: string - идентификатор карточки\
__Возвращаемое значение:__ void

__Getter__\
__Параметры:__ нет\
__Возвращаемое значение:__ string - значение data-id или пустая строка

`title` (getter/setter)\
__Назначение:__ Управление заголовком товара\
__Setter:__\
__Параметры:__ value: string - текст заголовка\
__Возвращаемое значение:__ void

__Getter:__\
__Параметры:__ нет\
__Возвращаемое значение:__ string - текст заголовка или пустая строка

`image` (setter)
__Назначение:__ Установка изображения товара
__Параметры:__ value: string - URL изображения
__Возвращаемое значение:__ void

`description` (setter)\
__Назначение:__ Установка описания товара\
__Параметры:__ value: string - текст описания\
__Возвращаемое значение:__ void

`category` (setter)
__Назначение:__ Установка категории товара с применением стилей\
__Параметры:__ value: string - название категории\
__Возвращаемое значение:__ void

`price` (setter)\
__Назначение:__ Установка цены товара с обработкой особых случаев\
__Параметры: value:__ number | null - цена товара или null\
__Возвращаемое значение:__ void

`index` (setter)\
__Назначение:__ Установка порядкового номера в корзине\
__Параметры:__ value: number - индекс позиции\
__Возвращаемое значение:__ void

`buttonText` (setter)\
__Назначение:__ Установка текста кнопки\
__Параметры:__ value: string - текст кнопки\
__Возвращаемое значение:__ void

#### class Form
`Form<T>` - Универсальный компонент формы

##### Обзор
`Form<T>` - _обобщенный компонент для работы с формами, обеспечивающий управление состоянием, валидацией и обработкой событий. Наследуется от Component<IFormState> и поддерживает строгую типизацию полей формы через дженерик параметр T._
```
interface IFormState {
    valid: boolean;
    errors: string;
}
```
Определяет состояние формы:\
`valid` - флаг валидности формы\
`errors` - строка с сообщениями об ошибках

##### Структура класса
Защищенные свойства\
`_submit: HTMLButtonElement` - кнопка отправки формы\
`_errors: HTMLElement` - контейнер для отображения ошибок\

##### Конструктор
```
constructor(protected container: HTMLFormElement, protected events: IEvents)
```
__Параметры:__\
`container: HTMLFormElement `- элемент HTML формы\
`events: IEvents` - система событий для межкомпонентного взаимодействия\
__Возвращаемое значение:__ экземпляр класса Form<T>

##### Обработчики событий
Обработка ввода данных
```
this.container.addEventListener('input', (e: Event) => {
    const target = e.target as HTMLInputElement;
    const field = target.name as keyof T;
    const value = target.value;
    this.onInputChange(field, value);
});
```
__Логика:__
- Извлекает имя поля и значение из input элемента\
- Преобразует имя поля к типу keyof T для типобезопасности\
- Вызывает метод onInputChange с данными поля

##### Обработка отправки формы
```
this.container.addEventListener('submit', (e: Event) => {
    e.preventDefault();
    this.events.emit(`${this.container.name}:submit`);
});
```
__Логика:__
- Предотвращает стандартное поведение отправки формы
- Эмитит событие с именем формы в формате {formName}:submit

##### Методы
`protected onInputChange(field: keyof T, value: string): void`
__Назначение:__ Обработка изменения значения поля формы\
__Параметры:__
- `field: keyof T` - имя измененного поля (типизированное)\
- `value: string` - новое значение поля\
__Возвращаемое значение:__ void

##### Сеттеры
`set valid(value: boolean): void`
__Назначение:__ Управление состоянием кнопки отправки формы на основе валидности\
__Параметры:__
- `value: boolean` - флаг валидности формы\
__Возвращаемое значение:__ void

`set errors(value: string): void`
__Назначение:__ Установка сообщений об ошибках формы\
__Параметры:__
- `value: string` - текст ошибки для отображения

__Возвращаемое значение:__ void

##### Основной метод рендеринга
`render(state: Partial<T> & IFormState): HTMLFormElement`
Назначение: Обновление состояния формы и полей ввода\
Параметры:
- state: Partial<T> & IFormState - объект состояния, содержащий:\
- valid: boolean - валидность формы\
- errors: string - сообщения об ошибках\
поля формы типа T - значения для установки в поля

__Возвращаемое значение:__ HTMLFormElement - корневой элемент формы

#### class PaymentStep и class ContactStep

##### PaymentStep и ContactStep - Компоненты формы заказа
##### Обзор
Классы `PaymentStep` и `ContactStep` наследуются от универсального компонента Form<TOrder> и реализуют конкретные шаги оформления заказа: выбор способа оплаты и ввод контактных данных.

__PaymentStep__ _- Шаг выбора способа оплаты и адреса_

__Структура класса__
Защищенные свойства\
`cardButtonElement: HTMLButtonElement` - кнопка выбора оплаты картой\
`cashButtonElement: HTMLButtonElement` - кнопка выбора оплаты наличными\
`addressInputElement: HTMLInputElement` - поле ввода адреса доставки

##### Конструктор
```
constructor(container: HTMLFormElement, events: IEvents)
```
__Параметры:__
- container: HTMLFormElement - элемент HTML формы\
- events: IEvents - система событий для межкомпонентного взаимодействия

__Возвращаемое значение:__ экземпляр класса PaymentStep

##### Обработчики событий
_Выбор оплаты картой_
```
this.cardButtonElement.addEventListener('click', () => {
    events.emit('formField:changed', {
        field: 'payment',
        value: Tpayment.card,
    });
});
```
_Выбор оплаты наличными_
```
this.cashButtonElement.addEventListener('click', () => {
    events.emit('formField:changed', {
        field: 'payment',
        value: Tpayment.cash,
    });
});
```
_Ввод адреса_
```
this.addressInputElement.addEventListener('input', () => {
    events.emit('formField:changed', {
        field: 'address',
        value: this.addressInputElement.value,
    });
});
```
##### Сеттеры
`set payment(value: Tpayment): void`\
__Назначение:__ Визуальное выделение выбранного способа оплаты\
__Параметры:__
__value: Tpayment__ - выбранный способ оплаты (card или cash)\

__Возвращаемое значение:__ void

`set address(value: string): void`
__Назначение:__ Установка значения адреса доставки\
__Параметры:__
- `value: string` - адрес для установки в поле ввода

__Возвращаемое значение:__ void

__ContactStep__ _- Шаг ввода контактных данных_

__Структура класса__\
Защищенные свойства\
`emailInputElement: HTMLInputElement` - поле ввода email
`phoneInputElement: HTMLInputElement` - поле ввода телефона

##### Конструктор
```
constructor(container: HTMLFormElement, events: IEvents)
```
Параметры:
- `container: HTMLFormElement` - элемент HTML формы
- `events: IEvents` - система событий для межкомпонентного взаимодействия

##### Обработчики событий
_Ввод email_
```
this.emailInputElement.addEventListener('input', () => {
    events.emit('formField:changed', {
        field: 'email',
        value: this.emailInputElement.value,
    });
});
```
_Ввод телефона_
```
this.phoneInputElement.addEventListener('input', () => {
    events.emit('formField:changed', {
        field: 'phone',
        value: this.phoneInputElement.value,
    });
});
```

##### Сеттеры
`set email(value: string): void`
__Назначение:__ Установка значения email\
__Параметры:__
- value: string - email для установки в поле ввода

__Возвращаемое значение:__ void

`set phone(value: string): void`\
__Назначение:__ Установка значения телефона
__Параметры:__
- `value: string` - телефон для установки в поле ввода

__Возвращаемое значение:__ void

#### class OrderSuccess

__OrderSuccess - Компонент успешного оформления заказа__

##### Обзор

`OrderSuccess` _- компонент модального окна, отображающий подтверждение успешного оформления заказа и информацию о списанной сумме. Наследуется от_ `Component<IOrderSuccess>`.

Интерфейсы
```
interface IOrderSuccess {
    total: number;
}
```
Определяет данные для отображения в компоненте:
- `total` - общая сумма заказа

```
interface IOrderSuccessActions {
    onClick: () => void;
}
```
Определяет обработчики событий для компонента:
- `onClick` - функция-обработчик клика по кнопке закрытия

##### Структура класса
_Защищенные свойства_
- `_description: HTMLElement` - элемент для отображения описания с суммой заказа
- `_close: HTMLElement` - кнопка закрытия модального окна

##### Конструктор
```
constructor(container: HTMLElement, actions: IOrderSuccessActions)
```
__Параметры:__
- `container: HTMLElement` - корневой элемент компонента успешного заказа
- `actions: IOrderSuccessActions` - объект с обработчиками событий компонента

##### Обработчики событий
_Закрытие модального окна_
```
if (actions?.onClick) {
    this._close.addEventListener('click', actions.onClick);
}
```
##### Сеттеры
`set total(value: number): void`
__Назначение:__ Установка общей суммы заказа и обновление текста описания
__Параметры:__
- value: number - общая сумма заказа для отображения

__Возвращаемое значение:__ void


## События в приложении

`items:updated` – при старте приложения в экз класса слоя коммуникации с сервера поступают данные, устанавливаются в поле `_catalog` экз класса AppData\
`basket:open` – на главной странице пользовательского интерефейса, при клике на иконку корзины, генерируется событие, для открытия модального окна\
`card:select` – после загрузки, в каталоге, на главной странице посетитель может кликнуть на заинтересовавший товар, сгенерируется это событие, оно нужно для установки значения в поле `_preview` экз класс AppData, для последующего открытия данного товара в модальном окне, с полным описанием. С возможностью добавить его в корзину\
`preview:updated` – генерируется при изменениях в поле _preview экз класс AppData\
`item:check` - проверка/изменение товара в корзине\
`basket:updated` - обновление содержимого корзины, при добавлении товара в корзину обновляется содержимое корзины, счетчик\
`order:open` - открытие оформления заказа, генерируется при нажатии кнопки в корзине\
`formField:changed` - изменение поля формы\
`form:validated` - валидация формы, событие наступает когда форма валидирована\
`order:submit`- отправка первого шага заказа, наступает когда нажимаем кнопку формы на этапе выбора оплаты и ввода адреса\
`contacts:submit`- отправка контактных данных, наступает когда поля почты и телефона заполнены корректно и нажимается кнопка на этом этапе\
`order:confirmed`- подтверждение заказа\
`modal:open` – событие для реализации открытия модального окна\
`modal:close` – событие для реализации закрытия модального окна